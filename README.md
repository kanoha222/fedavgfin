# my_fedhar
## 实验思路：

### 1.层次聚类：

按用户分为多个客户端，先进行n轮普通联邦学习，然后第n+1次进行聚类算法通过客户端上传的权重进行聚类，对同一cluster的客户端模型进行fedavg，对于全局模型将cluster平均的权重和未聚类的客户端权重进行加权平均，然后分别传回客户端。

以后使用相同方法，即先聚类后更新，直至没有新的聚类产生且正确率不在增长

#### 联邦聚合方法：

将每个客户端内都创建一个单独的模型和优化器进行训练（或者在trainer中创建对应每个客户端的模型和优化器list，后续只需将对应的簇进行step方法更新模型），簇中的模型更新上传到服务器中建立的用于对应簇的权重存储空间，计算各个簇之间的距离，更新簇之后计算各个簇的平均权重后保存，各个簇的客户端读取权重然后使用优化器step方法更新模型，之后训练下一轮

### 2.模型结构：

前馈式深度神经网络，该网络由三个分别拥有 32、16 和 16 个神经元的全连接层以及一个用于分类的 softmax 层组成。

训练类继承关系：trainer->StochasticTrainer->StochasticNearTrainer+database.Uci->UciStochasticNearTrainer



#### 交叉熵损失函数

经常用于分类问题中，特别是在神经网络做分类问题时，也经常使用交叉熵作为损失函数，此外，由于交叉熵涉及到计算每个类别的概率，所以交叉熵几乎每次都和**sigmoid(或softmax)函数**一起出现

1. 神经网络最后一层得到每个类别的得分**scores（也叫logits）**；

2. 该得分经过**sigmoid(或softmax)函数**获得概率输出；

3. 模型预测的类别概率输出与真实类别的one hot形式进行交叉熵损失函数的计算。

   ![image-20231007102430094](C:\Users\kano\AppData\Roaming\Typora\typora-user-images\image-20231007102430094.png)

### 3.大纲：

 ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
  ┃                                  论文大纲：个性化人类行为识别的隐私保护联合聚类                                  ┃
  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛


                                                        1. 引言

   • 研究背景和现状：介绍人类行为识别和隐私保护的重要性及现有方法的局限性。
   • 问题陈述和研究目标：阐述本文的研究问题和目标，即结合联邦学习和余弦相似度的联邦层次聚类方法，以及使用差分隐私进行
     的隐私保护。
   • 论文结构概述：简要介绍本文的组织结构和各章节内容。


                                                      2. 相关工作

   • 联邦学习在人类行为识别中的应用：综述使用联邦学习进行个性化人类行为识别的研究工作，并分析其优缺点。
   • 余弦相似度的联邦层次聚类方法：综述基于余弦相似度的联邦聚类方法及其在人类行为识别中的应用。
   • 差分隐私在数据保护中的应用：介绍差分隐私的基本原理和常用的差分隐私保护方法。


                                                        3. 方法

   • 个性化模型训练的联邦学习框架：详细介绍联邦学习中个性化模型训练的框架和算法，包括参与者的选择、模型聚合和参数更新
     等过程。
   • 基于余弦相似度的联邦层次聚类算法：提出基于余弦相似度的联邦层次聚类算法，用于将具有相似行为模式的参与者聚类在一起
     。
   • 差分隐私保护的数据处理方法：介绍差分隐私技术在联邦学习中的应用，包括数据扰动、噪声添加和查询响应等方法。


                                                   4. 实验设计与结果

   • 数据集介绍和预处理方法：描述使用的数据集（例如UCI-HAR数据集）及其特征，以及针对个性化行为识别进行的预处理方法。
   • 实验设置和评估指标：说明实验的设置，包括参与者的数量和数据分布情况，以及评估个性化行为识别和数据隐私保护效果的指
     标。
   • 实验结果及分析：展示实验结果，包括个性化模型的准确率、隐私保护指标和聚类效果，并对结果进行详细分析和讨论。


                                                     5. 讨论与展望

   • 研究成果的意义和局限性：讨论本文的研究成果对个性化行为识别和隐私保护的意义，并指出存在的局限性。
   • 隐私保护和个性化模型训练的潜在挑战：探讨隐私保护和个性化模型训练中可能面临的挑战，如数据共享、模型安全性和性能效
     率等方面。
   • 未来工作的方向和可能性：提出未来研究的方向和可能的改进，如改进聚类算法、增强差分隐私的保护能力以及拓展联邦学习在
     其他领域的应用。


                                                        6. 结论

   • 总结论文的主要贡献和发现。
   • 对未来研究的建议和展望。


                                                      7. 参考文献

## 
